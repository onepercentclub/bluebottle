{% load i18n bb_ember static %}

{% tplhandlebars "fundraiser" %}

    <div class="l-section detail" id="fundraiser-detail">
        <section class="l-wrapper">

            <div class="l-half">
                <figure class="project-image">
                    {{#if video_html}}
                        {{{video_html}}}
                    {{else}}
                        <img {{bindAttr src="image.large"}} width="100%" alt="Photo" />
                    {{/if}}
                </figure>
            </div>

            <div class="l-half">
                <div class="fundraiser-share">
                    {{view App.SocialShareView}}
                </div>
                <article class="project-info">
                    {{#if isOwner}}
                        <ul class="owner-settings">
                            <li class="owner-settings-dropdown"><span class="flaticon solid settings-2"></span>
                                <ul class="owner-settings-dropdown-menu">
                                    <li>{{#linkTo 'fundraiserEdit' id}}{% trans "Edit Fundraiser" %}{{/linkTo}}</li>
                                    <li>{{#linkTo 'fundraiserDonationList' id}}{% trans "View Donations" %}{{/linkTo}}</li>
                                </ul>
                            </li>
                        </ul>
                    {{/if}}
                    <h1 class="project-title">{{title}}</h1>
                    <p class="project-description">{{description}}</p>
                </article>
            </div>
        </section>

        <section class="l-wrapper">
        	<div class="l-half">

                <div class="fundraiser-project">
                    <figure class="fundraiser-project-image"><img {{bindAttr src="project.image"}} width="100%" alt="Photo" /></figure>

                    <div class="fundraiser-project-detail">
                        <h4>{% trans "Fundraising for" %}</h4>
                        <p>{{#linkTo 'project' project.getProject}}{{project.title}}{{/linkTo}}</p>
                    </div>
                </div>

        	</div>

        	<div class="l-half">
                <article class="fundraiser-member">

                    <figure class="member-avatar">
                        <a href='#' {{action 'openInBigBox' 'userModal' owner }} class="TODO">
                            <img {{bindAttr src="owner.getAvatar" alt="owner.full_name"}} />
                            <strong class="member-name"><em>{% trans "Fundraiser" %}</em> {{owner.full_name}}</strong>
                        </a>
                    </figure>

                    <div class="project-action">
                        {{#if project.isStatusCampaign}}
                            {{#ifExpired deadline}}
                                <strong>{% trans "deadline passed" %}</strong>
                            {{else}}
                                <a href='#' {{ action 'addDonation' this.project this }} class="btn btn-primary">
                                    {% trans "Support" %} {{owner.first_name}}
                                </a>
                            {{/ifExpired}}
                        {{else}}
                            <strong>{% trans "Project Funded" %}</strong>
                        {{/if}}
                    </div>
                </article>
        	</div>

        </section>
    </div>

    <div class="l-section detail" id="fundraiser-status">

       <section class="l-wrapper">

            <div class="project-status">

                {{#if deadline}}
                    <div class="project-days-left">
                        <strong><span class="flaticon solid stopwatch-1"></span>
                        {{#ifExpired deadline}}
                            <em>{% trans "deadline passed" %}</em>
                        {{else}}
                            {{daysToGo}} <em>{% trans "days to go" %}</em>
                        {{/ifExpired}}
                        </strong>
                    </div>
                {{/if}}

                <div class="project-fund">
                    <p class="project-fund-amount">
                        <strong class="amount-donated">&euro;{{localize amount_donated}}</strong>
                        {% trans "of" %}
                        <strong class="amount-asked">&euro;{{localize amount}}</strong>
                        {% trans "raised" %}
                    </p>
                    {{bb-progressbar class="project-fund-amount-slider" targetValue=amount currentValue=amount_donated}}
                </div>

                <ul class="member-list">
                    <li class="project-member-supporters">
                        {{simple-project-supporters class="project-supporters" supporters=recentSupporters limit=10 showProfile="showProfile"}}
                    </li>
                </ul>
            </div>
       </section>
    </div>

    <div class="l-section" id="wall">
        <div class="l-wrapper">
            <section id="wallposts">
                {{partial 'wallposts'}}
            </section>


            <section id="sidebar">

                    {{!-- Todo: only show block when there are supporters --}}
                <div id="supporter-list">

                    <div class="activity">

                        <header class="activity-header">
                            <h2 class="activity-title">{% trans "Supporters" %}</h2>
                        </header>

                        {{project-donations class="project-supporters" donations=fundraiserDonations limit=10 showProfile="showProfile"}}

                        <footer class="activity-footer">
                            <a {{action 'addDonation' controllers.project}}  class="activity-action">
                                <strong>{% trans "Support this fundraiser" %} &raquo;</strong><br />
                                {% trans "And get your name on the wall!" %}
                            </a>
                        </footer>

                    </div>
                </div>

            </section>
        </div>
    </div>

{% endtplhandlebars %}
