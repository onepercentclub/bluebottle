{% load bb_ember %}
{% load i18n %}
{% load static %}


{% tplhandlebars "my_project_organisation" %}

    {{#unless isPhasePlanNew}}
        {{bb-flash data=flash}}
    {{/unless}}

    <legend>
        <strong>{% trans "Partner organisation" %}</strong>
        <p>
            {% trans "Give us the details about your partner organisation whose sole purpose in life it is to address the topic that you care about!" %}
        </p>

        {{#if hasSelectableOrganizations}}
            <br />
            {{#if hasOneSelectableOrganization}}
                <p>
                    {% trans "You can import this from a previous campaign: " %}<a {{action setFirstSelectableOrganization}}>{% trans "Import:" %} {{firstSelectableOrganization.name}}</a>
                </p>    
            {{else}}
                <fieldset>
                    <ul>
                        {{#bb-form-field classBinding="wide"}}
                            {% trans "It appears that you already have an (other) organisation. Select it below or fill out the form to create a new one." %}
                            {{view App.MyOrganizationSelectView name='organization' 
                                                                contentBinding='selectableOrganizations'
                                                                optionValuePath='content.id'
                                                                optionLabelPath='content.nameOrDefault'
                                                                selectionBinding='controller.selectedOrganization'}} 
                            <button class="btn btn-modest add-org" {{action newOrganization}}>New</button>
                        {{/bb-form-field}}
                    </ul>
                </fieldset>
            {{/if}}
        {{/if}}
    </legend>


    <fieldset>
        <ul>
            {{partial "my_project_organisation_fields"}}
        </ul>
    </fieldset>


    <legend>
        <strong>{% trans "Legal status" %}</strong>
        <p>{% trans "Upload a document that identifies your contact person or your partner organisation. The document can be an ID, passport, memorandum of association or an other official document." %}</p>
    </legend>


    <fieldset>
        <ul>
            <li class="control-group has-popover" data-content="{% trans "please upload a copy of your passport. Make sure it's a valid one and we can read it clearly!" %}">
                <label class="control-label">
                    {% trans "Partner Passport" %} ({{attachedDocuments.length}})<br />
                    <small>
                        {% trans ".jpg, .png or .pdf" %}
                    </small>
                </label>

                <div class="controls manage-project-files">
                    <a class="btn btn-iconed btn-upload">
                        {{view App.UploadMultipleFiles name="documents" multiple=true}}
                        <span class="flaticon solid upload-document-1"></span>
                        {% trans "Upload scan(s)" %}
                    </a>
                    <br />
                    {{#each doc in attachedDocuments}}
                        <a {{action removeFile doc}}><span class="flaticon solid minus-2"></span></a>
                        <a {{bindAttr href=doc.file.url}}>
                            {{doc.file.name}} <small>{{doc.file.size}}</small><br/>
                        </a>
                    {{/each}}
                </div>
            </li>
        </ul>
    </fieldset>

    {{ partial '_my_project_save_edit_footer'}}

{% endtplhandlebars %}
