{% load bb_ember %}
{% load i18n %}
{% load static %}

{% tplhandlebars "taskActivity" %}

    {{#if members}}
        <div class="activity">

            <header class="activity-header">
                <h2 class="activity-title">{% trans "Task members" %}</h2>
            </header>

            <ul class="activity-list">
                {{#each members}}
                    {{render "taskMember" this}}
                {{/each}}
            </ul>
            {{#if isApplicable}}
                <footer class="activity-footer">
                    <a {{action applyForTask this }} class="activity-action">
                        <strong>{% trans "Apply for task" %}</strong>
                    </a>
                </footer>
            {{/if}}
        </div>
    {{/if}}


    <div class="activity">

        <header class="activity-header">
            <h2 class="activity-title">{% trans "Files" %}</h2>
        </header>


        <ul class="activity-list">
            {{#each files}}
                {{#if id}}
                    <li>
                        <span class="task-file-filename">
                            <span class="flaticon stroke document-1"></span>
                            <a {{bindAttr href="this.file.url"}}>
                                {{#if this.title}}
                                    {{this.title}}
                                {{else}}
                                    {{this.file.name}}
                                {{/if}}
                            </a>
                        </span>
                        <span class="task-file-author">by
                            {{#link-to "viewProfile" author}}
                                {{author.full_name}}
                            {{/link-to}}
                        </span>
                        <span class="task-file-created">
                            {{localize created formatting="X"}}
                        </span>
                    </li>
                {{/if}}
            {{else}}
                <li>No files yet</li>
            {{/each}}
        </ul>

        {{#if controllers.task.canUpload}}
            <footer class="activity-footer">
                <a {{action 'uploadFile' this}} class='activity-action' >
                    <strong>{% trans "Add file" %} &raquo;</strong><br />
                    {% trans "Add file" %}
                </a>
            </footer>
        {{/if}}
    </div>

{% endtplhandlebars %}
