# -*- coding: utf-8 -*-
# Generated by Django 1.11.15 on 2019-11-07 07:53
from __future__ import unicode_literals

from django.db import migrations


def clear_user_dashboard(apps, schema_editor):
    try:
        UserDashboardModule = apps.get_model('dashboard', 'UserDashboardModule')
        UserDashboardModule.objects.all().delete()
    except LookupError:
        # Handle case where 'dashboard' app is not available (e.g., during tests)
        # Try with the correct app label for jet.dashboard
        try:
            UserDashboardModule = apps.get_model('jet.dashboard', 'UserDashboardModule')
            UserDashboardModule.objects.all().delete()
        except LookupError:
            # If neither works, skip the operation - this is likely during tests
            # where the dashboard app might not be properly loaded
            pass


class Migration(migrations.Migration):

    dependencies = [
        ('bluebottle_dashboard', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(clear_user_dashboard, migrations.RunPython.noop)
    ]
