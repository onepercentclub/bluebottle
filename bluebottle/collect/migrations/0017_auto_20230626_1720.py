# Generated by Django 2.2.24 on 2023-06-26 15:20

from django.db import migrations


def set_end_date(apps, schema_editor):
    CollectActivity = apps.get_model('collect', 'CollectActivity')
    CollectContributor = apps.get_model('collect', 'CollectContributor')
    for collect in CollectActivity.objects.filter(status='succeeded', end__isnull=True).all():
        collect.end  = CollectContributor.objects.filter(activity_id=collect.id).order_by('-updated')[0].updated
        collect.save()


class Migration(migrations.Migration):

    dependencies = [
        ('collect', '0016_auto_20211119_1143'),
    ]

    operations = [
        migrations.RunPython(
            set_end_date,
            migrations.RunPython.noop
        )
    ]
