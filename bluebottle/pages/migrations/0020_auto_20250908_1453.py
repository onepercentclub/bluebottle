# Generated by Django 4.2.20 on 2025-09-08 12:53

from django.db import migrations
import json


def migrate_text_fields(apps, schema_editor):
    ImageTextRoundItem = apps.get_model('pages', 'ImageTextRoundItem')
    ScaledImageTextItem = apps.get_model('pages', 'ScaledImageTextItem')
    ColumnsItem = apps.get_model('pages', 'ColumnsItem')
    ImageTextItem = apps.get_model('pages', 'ImageTextItem')

    for item in ScaledImageTextItem.objects.all():
        item.text = json.dumps({"html": item.text, "delta": ""})
        item.save()

    for item in ImageTextRoundItem.objects.all():
        item.text = json.dumps({"html": item.text, "delta": ""})
        item.save()

    for item in ImageTextItem.objects.all():
        item.text = json.dumps({"html": item.text, "delta": ""})
        item.save()

    for item in ColumnsItem.objects.all():
        item.text1 = json.dumps({"html": item.text1, "delta": ""})
        item.text2 = json.dumps({"html": item.text2, "delta": ""})
        item.save()



class Migration(migrations.Migration):

    dependencies = [
        ('pages', '0019_auto_20250905_1108'),
    ]

    operations = [
        migrations.RunPython(migrate_text_fields, migrations.RunPython.noop),
    ]
