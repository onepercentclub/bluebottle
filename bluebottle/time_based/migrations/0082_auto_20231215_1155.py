# Generated by Django 3.2.20 on 2023-12-15 10:55

from django.db import migrations


def accept_applicants(apps, schema_editor):
    DateParticipant = apps.get_model('time_based', 'DateParticipant')
    count = DateParticipant.objects.filter(status='new').filter(activity__timebasedactivity__review=False).count()
    print(f"{count} date participants will be accepted")
    DateParticipant.objects.filter(status='new').filter(activity__timebasedactivity__review=False).update(status='accepted')
    PeriodParticipant = apps.get_model('time_based', 'PeriodParticipant')
    count = DateParticipant.objects.filter(status='new', activity__timebasedactivity__review=False).count()
    print(f"{count} period participants will be accepted")
    PeriodParticipant.objects.filter(status='new', activity__timebasedactivity__review=False).update(status='accepted')


class Migration(migrations.Migration):

    dependencies = [
        ('time_based', '0081_auto_20231206_1119'),
    ]

    operations = [
        migrations.RunPython(
            accept_applicants,
            migrations.RunPython.noop,
        )
    ]
