{% load bb_ember %}
{% load i18n %}
{% load static %}

{% tplhandlebars "mediaWallPostNew" %}

    <div class="wallpost-action">
        <a {{action 'toggleForm' target='view'}}class="wallpost-post-update">
            <span class="flaticon solid comment-1"></span>
            Post a new update on wall
        </a>
        <div class="wallpost-form">
            <fieldset>
                <ul>
                    <li class="control-group">
                        <label class="control-label" for="wallpost-title">
                            {% trans "Name of your update." %}
                        </label>

                        <div class="controls">
                            {{view Ember.TextField valueBinding="title" placeholder="Keep it short and simple" id="wallpost-title" name="wallpost-title" classBinding="errors.title.length:error"}}
                        </div>

                        {{#if errors.title }}
                            <div class="errors">{{#each errors.title }}<p>{{this}}</p>{{/each}}</div>
                        {{/if}}
                    </li>

                    <li class="control-group">
                        <label class="control-label" for="wallpost-update">
                            {% trans "Your update." %}
                        </label>

                        <div class="controls">
                            {{view Ember.TextArea valueBinding="text" placeholder="Tell something about the progress, context or yourself!" cols="50" rows="4" name="wallpost-update" id="wallpost-update" classBinding="errors.text.length:error"}}
                        </div>

                        {{#if errors.text }}
                            <div class="errors">{{#each errors.text }}<p>{{this}}</p>{{/each}}</div>
                        {{/if}}
                    </li>

                    <li class="control-group">
                        <label class="control-label" for="wallpost-video" >
                            {% trans "Add link to video" %}
                        </label>

                        <div class="controls">
                            {{view Ember.TextField valueBinding="video_url" placeholder="Use YouTube or Vimeo" id="wallpost-video" name="wallpost-video" classBinding="errors.video_url.length:error"}}
                        </div>

                        {{#if errors.video_url}}
                            <div class="errors">{{#each errors.video_url}}<p>{{this}}</p>{{/each}}</div>
                        {{/if}}
                    </li>

                    <li class="control-group">
                        <label class="control-label" for="wallpost-photo">
                            {% trans "Upload photos" %}<br/>
                            <small>{% trans "format 620 x 380 minimum for best result" %}</small>
                        </label>

                        <div class="controls">
                            <ul class="form-wallpost-photos">
                                {{#each photo in files}}
                                    <li class="form-wallpost-photo">
                                        {{#if photo.errors}}
                                            <span class="message is-error">{% trans "Error" %}</span>
                                        {{else}}
                                            {{#if photo.photo.small}}
                                                <img {{bindAttr src="photo.photo.small"}} />
                                                <a {{action "removePhoto" photo href=true}} class="manage-delete"><span class="flaticon solid x-2"></span> <strong>{% trans "Delete" %}</strong></a>
                                            {{else}}
                                                <div class="is-loading-small"><img src="{% get_static_prefix %}images/loading.gif" /> <strong>{% trans "Loading photos&#8230;" %}</strong></div>
                                            {{/if}}
                                        {{/if}}
                                    </li>
                                {{/each}}
                            </ul>

                            <a class="btn-link btn-upload">
                                {{view App.UploadMultipleFiles valueBinding="photo_files" multiple="multiple" id="wallpost-photo" name="wallpost-photo" accept="image/*"}}
                                <span class="flaticon solid upload-document-1"></span>
                                {% trans "Upload photos" %}
                            </a>
                        </div>
                    </li>
                </ul>
            </fieldset>

            <button class="btn btn-iconed" {{action 'saveWallPost' target='controller'}}><span class="flaticon solid thinking-comment-1"></span>{% trans "Post Update" %}</button>

        </div>
    </div>

{% endtplhandlebars %}
